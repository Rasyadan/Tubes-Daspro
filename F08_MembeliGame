import arrayLength from lensplit
import toArray from csvparser
import login from F03_Login
def ID():
    ID = str(input('Masukkan ID game :'))
    return ID

def buy_game(ID, game, user) :
    datakepemilikan = (open("d:\\kepemilikan.csv", "r").readlines())
    kepemilikan = toArray(datakepemilikan,2,'array')
    #Searching lokasi dari ID game   
    for i in range(arrayLength(toArray(game,6,'array'))):
        if toArray(game,6,'array')[i] == ID:
            i_ID = i
            price_ID = toArray(game,6,'array')[i_ID+4]
            stok = toArray(game,6,'array')[i_ID+5]
            break   
    
    #Mencari saldo user 
    for j in range(arrayLength(toArray(user,6,'array'))):
        if toArray(user,6,'array')[j] == login(toArray(user,6,'array'))[1]:
            saldo = toArray(user,6,'array')[j+4]
    
    #Menentukan kepemilikan game dari user
    found = True
    for k in range(arrayLength(kepemilikan)-1):
        if kepemilikan[k] == ID and kepemilikan[k+1] == login(toArray(user,6,'array'))[0]:
            found = False
            
    if (found == True) and (saldo >= price_ID) and (stok != 0):
        print('Game','berhasil dibeli!')
    elif found == False:
        print('Anda sudah memiliki game tersebut')
    elif saldo < price_ID:
        print('Saldo anda tidak cukup untuk membeli Game tersebut!')
    elif stok == 0:
        print('Stok Game tersebut sedang habis!')
